name: CI/CD

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Go
      uses: actions/setup-go@v2
      with:
        go-version: 1.23

    - name: Set working directory
      run: cd src

    - name: Install dependencies
      run: go mod tidy
      working-directory: ./src

    - name: Run tests
      run: go test ./...
      working-directory: ./src

#  deploy:
#    runs-on: ubuntu-latest
#    needs: build

#    steps:
#    - name: Checkout code
#      uses: actions/checkout@v2

#    - name: Deploy to Heroku
#      env:
#        HEROKU_API_KEY: ${{ secrets.HEROKU_API_KEY }}
#        HEROKU_APP_NAME: ${{ secrets.HEROKU_APP_NAME }}
#      run: |
#        git remote add heroku https://git.heroku.com/${{ secrets.HEROKU_APP_NAME }}.git
#        git push heroku main
